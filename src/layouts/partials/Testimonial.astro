---
import GradientTitle from "@/components/GradientTitle.astro";
import TestimonialCard from "@/components/TestimonialCard.astro";
import { getListPage } from "@/lib/contentParser.astro";

const sectionData = await getListPage("testimonial", "testimonial");
if (!sectionData.data.enable) {
  return null;
}
const { description, head, testimonials, title } = sectionData.data;
---

<section class="section">
  <div class="container overflow-hidden">
    <div class="section-intro text-center lg:col-8 mx-auto">
      <GradientTitle title={head} data-aos="fade-up-sm" data-aos-delay="100" />
      <h2 set:html={title} data-aos="fade-up-sm" data-aos-delay="150" />
      <p
        class="text-lg text-text/80 lg:px-28"
        set:html={description}
        data-aos="fade-up-sm"
        data-aos-delay="200"
      />
    </div>
    <div class="section-content">
      <div class="grid grid-container--fit gap-5">
        {
          testimonials &&
            testimonials.length &&
            testimonials.map((testimonial, index) => {
              const aosDelay = 100 * (index % 3);
              return (
                <TestimonialCard
                  aosDelay={aosDelay}
                  testimonial={testimonial}
                />
              );
            })
        }
      </div>
    </div>
  </div>
</section>
